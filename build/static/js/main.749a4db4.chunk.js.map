{"version":3,"sources":["img/logo.png","img/add.png","img/empty.png","img/settings.svg","img/text.svg","img/image.svg","img/pen.svg","panels/TypePicker.js","img/left.svg","panels/TextSign.js","panels/AlbumItem.js","img/share.svg","img/share_img.png","utils/Utils.js","img/check.svg","panels/Settings.js","img/undo.svg","img/redo.svg","panels/Loader.js","panels/CustomSign.js","panels/Main.js","panels/Add.js","App.js","index.js"],"names":["TypePicker","props","onTypePicked","type","hidePicker","className","this","isShowTypePicker","onClick","src","text","image","pen","React","Component","TextSign","saveSign","iAm","user","dbUser","newSign","state","name","first_name","last_name","user_id","id","undefined","album","length","reverse","push","console","log","JSON","stringify","set","ref","db","handleChange","bind","event","value","target","setState","left","placeholder","onChange","AlbumItem","share","bridge","send","item","url","createSticker","style","backgroundColor","isMyAlbum","saveUserInDb","getUrlParameter","sParam","sParameterName","i","sURLVariables","window","location","search","substring","split","decodeURIComponent","declension","count","one","two","five","realCount","parseInt","Settings","toggleSigns","isShowSignSettings","isShowAlbumSettings","showSignSettings","toggleAlbum","signSetAll","isShowSetFriendsSign","can_sign_list","signWatchAll","isShowSetFriendsWatch","can_watch_list","signSetFriends","signSetWatch","close","toggleSettings","chooseFriends","onBridgeResult","e","detail","data","users","forEach","friend","includes","prevProps","subscribe","isShowSettings","marginLeft","check","Loader","CustomSign","save","savedImage","onImgLoaded","img","storage","getStorage","time","Date","getTime","mountainsRef","mountainImagesRef","fullPath","uploadString","then","snapshot","getDownloadURL","onSuccessLoaded","catch","error","thicknessChanged","thickness","Number","colorChanged","color","toggleSave","active","undo","paintableRef","current","redo","changeColor","changeColorClick","click","document","getElementsByClassName","useEraser","createRef","marginTop","marginRight","height","width","margin","screen","localStorage","getItem","onSave","onLongPress","Image","fr","FileReader","pickedFile","Main","showTypePicker","pickImage","uplFile","file","onload","onLoadedFileReader","readAsDataURL","isLoading","uploadBytes","result","fileUpload","fileChangedHandler","files","logo","settings","isBlockedSign","add","isBLockedWatch","map","index","empty","accept","display","Add","openView","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","databaseURL","measurementId","App","vk_profile_id","checkUserInDb","myId","getDbUser","checkIsUserIngame","onValue","onFound","onUserFoundInDB","val","isNewUser","activeView","view","app","initializeApp","database","getDatabase","activePanel","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.749a4db4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.675c0730.png\";","export default __webpack_public_path__ + \"static/media/add.758b81d9.png\";","export default __webpack_public_path__ + \"static/media/empty.d76886bf.png\";","export default __webpack_public_path__ + \"static/media/settings.1906753f.svg\";","export default __webpack_public_path__ + \"static/media/text.1c5d2b5d.svg\";","export default __webpack_public_path__ + \"static/media/image.a4bad6fb.svg\";","export default __webpack_public_path__ + \"static/media/pen.b9054b56.svg\";","import React from 'react';\nimport text from '../img/text.svg'\nimport image from '../img/image.svg'\nimport pen from '../img/pen.svg'\nclass TypePicker extends React.Component {\n   \n\tconstructor(props){\n\t\tsuper(props)\n        \n\t}\n    componentDidMount(){\n\n    }\n    onTypePicked = (type) => {\n        this.props.onTypePicked(type)\n        this.props.hidePicker()\n    }\n\trender() {\n\t  return (\n\t\t    <div className={this.props.isShowTypePicker ? 'appeal_container_bg_shown' : 'appeal_container_bg_hiden sdk_appeal_header'}>\n                <div onClick={this.props.hidePicker} className={this.props.isShowTypePicker ? 'animateAppealBgShow' : 'animateAppealBgHide sdk_appeal_header'}>\n\n                </div>\n                <div className={this.props.isShowTypePicker ? 'appeal_container_shown' : 'appeal_container_hide sdk_appeal_header'}>\n                    <div className=\"picker_cont\">\n                        <p className=\"picker_title\">Оставить автограф</p>\n                        <div onClick={() => this.onTypePicked(0)} className=\"picker_item\">\n                            <img className=\"picker_img\" src={text}/>\n                            <p className=\"picker_text\">Текстовый</p>\n                        </div>\n\n                        <div onClick={() => this.onTypePicked(1)}  className=\"picker_item\">\n                            <img className=\"picker_img\" src={image}/>\n                            <p className=\"picker_text\">Картинка</p>\n                        </div>\n\n                        <div onClick={() => this.onTypePicked(2)}  className=\"picker_item\">\n                            <img className=\"picker_img\" src={pen}/>\n                            <p className=\"picker_text\">Нарисовать</p>\n                        </div>\n                    </div>\n                    \n                </div>\n            </div>\n\t  )\n\t}\n  }\n  export default TypePicker;\n\n\n","export default __webpack_public_path__ + \"static/media/left.a78d9a4b.svg\";","import React from 'react';\nimport left from '../img/left.svg'\nimport { getDatabase, set, ref, onValue } from \"firebase/database\";\n\nclass TextSign extends React.Component {\n   \n\tconstructor(props){\n        super(props)\n        this.state = {\n            text : \"\"\n        }\n        this.handleChange = this.handleChange.bind(this)\n\t}\n    componentDidMount(){\n\n    }\n    handleChange(event){\n        if (event){\n            var value = event.target.value\n            this.setState({text : value})\n        }\n    }\n    saveSign = () => {\n        const iAm = this.props.user\n        var user = this.props.dbUser\n        const newSign = {type : 0, text : this.state.text, name : (iAm.first_name + \" \" + iAm.last_name), user_id : iAm.id}\n        if (user.album == undefined || user.album.length == 0){\n            user.album = [newSign]\n        } else {\n            if (user.album != undefined && user.album.length > 1){\n                user.album.reverse()\n            }\n            user.album.push(newSign)\n        }\n        console.log(\"saveSign user = \" + JSON.stringify(user))\n        set(ref(this.props.db, 'albums/' + user.user.id), user);\n        this.props.onTypePicked(-1)\n    }\n\trender() {\n\t  return (\n\t\t<div className=\"text_sign_screen\">\n            <div className=\"nav_text_sign\">\n                <div onClick={() => this.props.onTypePicked(-1)} className=\"back_cont\">\n                    <img src={left}/>\n                </div>\n                <p className=\"sign_title\">Оставить автограф</p>\n                \n            </div>    \n            <textarea className=\"sign_textarea\" placeholder=\"Ваш текст\" onChange={this.handleChange} value={this.state.text}/>\n            <div onClick={this.saveSign} className=\"center_hor sign_text_btn\">Оставить</div>\n        </div>\n\t  )\n\t}\n  }\n  export default TextSign;\n\n\n","import React from 'react';\nimport share from '../img/share.svg'\nimport share_img from '../img/share_img.png'\nimport bridge from '@vkontakte/vk-bridge';\n\nclass AlbumItem extends React.Component {\n   \n\tconstructor(props){\n        super(props)\n        \n\t}\n    componentDidMount(){\n\n    }\n    share = () => {\n        bridge.send(\"VKWebAppShowStoryBox\", { \"background_type\" : \"image\", \"url\" : this.props.item.url }); \n        \n    }\n\n    \n    createSticker = (url) => {\n        const sticker = {\"sticker_type\" : \"renderable\", \n            \"sticker\" : { \"content_type\" : \"image\", \n            \"url\" : url, \n            \"clickable_zones\" : [\n                {\"action_type\" : \"link\", \n                    \"action\" :  { \n                    \"link\": \"https://vk.com/8213105\", \n                    \"tooltip_text_key\": \"tooltip_open_default\" }\n                }\n            ]}\n        }\n        return sticker\n    }\n\trender() {\n\t  return (\n\t\t<div className=\"album_item\">\n            {this.props.item.type == 0 && <div className=\"just_cont\">\n                <p className=\"item_text\">{this.props.item.text}</p>\n                {/* {this.props.isMyAlbum && <img onClick={this.share} className=\"share\" src={share}/>} */}\n                \n            </div>}\n            {(this.props.item.type == 1 || this.props.item.type == 2) && \n                <div className=\"relative\"> \n                    {/* {this.props.item.type == 2 && <div className=\"img_white_bg\"/>} */}\n                    <img style={this.props.item.type == 2 ? {backgroundColor : 'white'} : {}} className=\"item_img\" src={this.props.item.url}/>\n                    {this.props.isMyAlbum && <img onClick={this.share} className=\"share_img\" src={share_img}/>}\n                </div>\n            }\n            <div className=\"line\"/>\n            <p className=\"item_desc\">{this.props.item.name}</p>\n        </div>\n\t  )\n\t}\n  }\n  export default AlbumItem;\n\n\n","export default __webpack_public_path__ + \"static/media/share.fb6fa12a.svg\";","export default \"data:image/png;base64,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\"","import { getDatabase,ref, set, onValue } from \"firebase/database\";\n\nexport function saveUserInDb(db, user) {\n    \n    set(ref(db, 'albums/' + user.user.id), user);\n}\nexport function getRandomInt(max) {\n    const min = 1\n    let difference = max - min;\n\n    // generate random number \n    let rand = Math.random();\n\n    // multiply with difference \n    rand = Math.floor( rand * difference);\n\n    // add with min value \n    rand = rand + min;\n\n    return rand;\n}\n\nexport const addLocation = (location) => {\n    var locations = getSavedLocation()\n    if (locations == null || locations == undefined){\n        locations = []\n    }\n    locations.push(location)\n    localStorage.setItem('locations', JSON.stringify(locations));\n}\nexport const getSavedLocation = () => {\n    return JSON.parse(localStorage.getItem('locations'))\n};\n\nexport function getUrlParameter(sParam) {\n    var sPageURL = window.location.search.substring(1),\n        sURLVariables = sPageURL.split('&'),\n        sParameterName,\n        i;\n\n    for (i = 0; i < sURLVariables.length; i++) {\n        sParameterName = sURLVariables[i].split('=');\n\n        if (sParameterName[0] === sParam) {\n            return sParameterName[1] === undefined ? undefined : decodeURIComponent(sParameterName[1]);\n        }\n    }\n};\n\nexport const declension = (count, one, two, five) => {\n    var realCount = parseInt(count);\n  \n    if (realCount > 100)\n    realCount %= 100;\n  \n    if (realCount > 20)\n    realCount %= 10;\n  \n    switch (realCount) {\n        case 1:\n            return one;\n        case 2:\n        case 3:\n        case 4:\n            return two;\n        default:\n            return five;\n    }\n  }","export default __webpack_public_path__ + \"static/media/check.50686e2c.svg\";","import React from 'react';\nimport left from '../img/left.svg'\nimport check from '../img/check.svg'\nimport { saveUserInDb, declension } from '../utils/Utils';\nimport bridge from '@vkontakte/vk-bridge';\n\nclass Settings extends React.Component {\n   \n\tconstructor(props){\n        super(props)\n        const user = this.props.dbUser\n\n        this.state = {\n            isShowSignSettings : false,\n            isShowAlbumSettings : false,\n            isShowSetFriendsSign : (user.can_sign_list != undefined && user.can_sign_list.length > 0),\n            isShowSetFriendsWatch : (user.can_watch_list != undefined && user.can_watch_list.length > 0)\n        }\n    }\n    componentDidUpdate(prevProps){\n        if (this.props != prevProps){\n            const user = this.props.dbUser\n            this.setState({isShowSetFriendsSign : (user.can_sign_list != undefined && user.can_sign_list.length > 0),\n                isShowSetFriendsWatch : (user.can_watch_list != undefined && user.can_watch_list.length > 0)})\n        }\n    }\n    componentDidMount(){\n        bridge.subscribe(this.onBridgeResult);\n    }\n    toggleSigns = () => {\n        if (this.state.isShowSignSettings){\n            this.setState({isShowSignSettings : !this.state.isShowSignSettings})\n        } else if (this.state.isShowAlbumSettings){\n            this.setState({isShowAlbumSettings : !this.state.isShowAlbumSettings})\n        }\n    }\n    showSignSettings = () => {\n        this.setState({isShowSignSettings : true})\n    }\n    toggleAlbum = () => {\n        this.setState({isShowAlbumSettings : !this.state.isShowAlbumSettings})\n    }\n    signSetAll = () => {\n        this.setState({isShowSetFriendsSign : false})\n        const user = this.props.dbUser\n        if (user.can_sign_list != undefined && user.can_sign_list.length > 0){\n            user.can_sign_list = []\n            saveUserInDb(this.props.db, user)\n        }\n    }\n    signWatchAll = () => {\n        this.setState({isShowSetFriendsWatch : false})\n        const user = this.props.dbUser\n        if (user.can_watch_list != undefined && user.can_watch_list.length > 0){\n            user.can_watch_list = []\n            saveUserInDb(this.props.db, user)\n        }\n    }\n    signSetFriends = () => {\n        this.setState({isShowSetFriendsSign : true})\n    }\n    signSetWatch = () => {\n        this.setState({isShowSetFriendsWatch : true})\n    }\n    close = () => {\n        this.setState({isShowAlbumSettings : false, isShowSignSettings : false, isShowSetFriendsSign : false})\n        this.props.toggleSettings()\n    }\n    chooseFriends = () => {\n        bridge.send(\"VKWebAppGetFriends\", {\"multi\" : true});\n        \n    }\n    onBridgeResult = (e) => {\n        if (e.detail.type == \"VKWebAppGetFriendsResult\"){\n            console.log(\"friends = \" + JSON.stringify(e.detail.data))\n            if (e.detail.data == undefined || e.detail.data.users == undefined || e.detail.data.users.length == 0){\n                return\n            }\n            const user = this.props.dbUser\n            if (this.state.isShowSignSettings && this.state.isShowSetFriendsSign){\n                if (user.can_sign_list == undefined || user.can_sign_list.length == 0){\n                    user.can_sign_list = []\n                }\n                e.detail.data.users.forEach(friend => {\n                    if (!user.can_sign_list.includes(friend.id)){\n                        user.can_sign_list.push(friend.id)\n                    }\n                });\n            } else if (this.state.isShowAlbumSettings && this.state.isShowSetFriendsWatch){\n                if (user.can_watch_list == undefined || user.can_watch_list.length == 0){\n                    user.can_watch_list = []\n                }\n                e.detail.data.users.forEach(friend => {\n                    if (!user.can_watch_list.includes(friend.id)){\n                        user.can_watch_list.push(friend.id)\n                    }\n                });\n            }\n            saveUserInDb(this.props.db, user)\n            this.toggleSigns()\n        }\n    }\n\trender() {\n        const user = this.props.dbUser\n        const can_sign_list = user.can_sign_list\n        const can_watch_list = user.can_watch_list\n        return (\n                <div className={this.props.isShowSettings ? 'appeal_container_bg_shown' : 'appeal_container_bg_hiden sdk_appeal_header'}>\n                    <div onClick={this.close} className={this.props.isShowSettings ? 'animateAppealBgShow' : 'animateAppealBgHide sdk_appeal_header'}>\n\n                    </div>\n                    <div className={this.props.isShowSettings ? 'appeal_container_shown' : 'appeal_container_hide sdk_appeal_header'}>\n                        {(!this.state.isShowSignSettings && !this.state.isShowAlbumSettings) && <div className=\"picker_cont\">\n                            <p className=\"picker_title\">Настройки приватности</p>\n                            <div onClick={this.showSignSettings} className=\"just_cont\">\n                                <p className=\"settings_text\">Кто может оставлять автографы</p>\n                                <p className=\"settings_text blue\">{(can_sign_list != undefined && can_sign_list.length > 0) ? can_sign_list.length + \" \" + declension(can_sign_list.length, \"друг\", \"друга\", \"друзей\") : \"Все\"}</p>\n                            </div>\n\n                            <div onClick={this.toggleAlbum} className=\"just_cont\">\n                                <p className=\"settings_text\">Кто может смотреть альбом</p>\n                                <p className=\"settings_text blue\">{(can_watch_list != undefined && can_watch_list.length > 0) ? can_watch_list.length + \" \" + declension(can_watch_list.length, \"друг\", \"друга\", \"друзей\") : \"Все\"}</p>\n                            </div>\n                        </div>}\n\n                        {this.state.isShowSignSettings && \n                            <div className=\"picker_cont\">\n                                <div className=\"flex\">\n                                    <div style={{marginLeft : '-12px'}} onClick={this.toggleSigns} className=\"back_cont\">\n                                        <img src={left}/>\n                                    </div>\n                                    <p className=\"sign_title\">Кто может оставлять автографы</p>\n                                </div>\n                                <div onClick={this.signSetAll} className=\"just_cont\">\n                                    <p className=\"settings_text\">Все</p>\n                                    {((can_sign_list == undefined || can_sign_list.length == 0) && !this.state.isShowSetFriendsSign) && <img src={check}/>}\n                                </div>\n                                <div onClick={this.signSetFriends} className=\"just_cont\">\n                                    <p className=\"settings_text\">Только друзья</p>\n                                    {((can_sign_list != undefined && can_sign_list.length > 0) || this.state.isShowSetFriendsSign) && <img src={check}/>}\n                                </div>\n                                {this.state.isShowSetFriendsSign && \n                                    <div onClick={this.chooseFriends} className=\"pick_friends_btn\">Выбрать близких друзей</div>\n                                }\n                            </div>\n                        }\n\n                        {this.state.isShowAlbumSettings && \n                            <div className=\"picker_cont\">\n                                <div className=\"flex\">\n                                    <div style={{marginLeft : '-12px'}} onClick={this.toggleSigns} className=\"back_cont\">\n                                        <img src={left}/>\n                                    </div>\n                                    <p className=\"sign_title\">Кто может смотреть альбом</p>\n                                </div>\n                                <div onClick={this.signWatchAll} className=\"just_cont\">\n                                    <p className=\"settings_text\">Все</p>\n                                    {((can_watch_list == undefined || can_watch_list.length == 0) && !this.state.isShowSetFriendsWatch) && <img src={check}/>}\n                                </div>\n                                <div onClick={this.signSetWatch} className=\"just_cont\">\n                                    <p className=\"settings_text\">Только друзья</p>\n                                    {((can_watch_list != undefined && can_watch_list.length > 0) || this.state.isShowSetFriendsWatch) && <img src={check}/>}\n                                </div>\n                                {this.state.isShowSetFriendsWatch && \n                                    <div onClick={this.chooseFriends} className=\"pick_friends_btn\">Выбрать близких друзей</div>\n                                }\n                            </div>\n                        }\n\n                    </div>\n                </div>\n        )\n\t}\n  }\n  export default Settings;\n\n\n","export default __webpack_public_path__ + \"static/media/undo.c1300db5.svg\";","export default __webpack_public_path__ + \"static/media/redo.c6a14cbd.svg\";","import React from 'react';\n\nclass Loader extends React.Component {\n    constructor(props){\n        super(props)\n\n    }\n    \n    render(){\n      \n            return (\n                <div style={this.props.style ? this.props.style : {}} className=\"account-content-loader loader-insta progress_bgstyle progress_bgstyle_earn top_56\">\n                    <div className=\"top_0\">\n                        <div className=\"lds-ring_insta loader-earn-container\">\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                    </div>\n                </div>\n            ); \n        \n        \n    }\n}\nexport default Loader;\n","import React from 'react';\nimport left from '../img/left.svg'\nimport undo from '../img/undo.svg'\nimport redo from '../img/redo.svg'\nimport check from '../img/check.svg'\nimport { Paintable, PaintableRef } from 'paintablejs/react';\nimport { getStorage, ref, uploadBytes, getDownloadURL, uploadString } from \"firebase/storage\";\nimport { saveUserInDb } from '../utils/Utils';\nimport Loader from './Loader';\n\nclass CustomSign extends React.Component {\n   \n\tconstructor(props){\n        super(props)\n        this.state = {\n            thickness : 5,\n            color : '#FF3347',\n            useEraser : false,\n            active : true\n        }\n        this.paintableRef = React.createRef();\n        this.changeColorClick = React.createRef();\n\t}\n    componentDidMount(){\n        if (document.getElementsByClassName('vkuiAppRoot').length > 0){\n            document.getElementsByClassName('vkuiAppRoot')[0].style[\"overflow\"] = 'hidden'\n        }\n    }\n    save = (image) => {\n        console.log(\"saved image = \" + image)\n        console.log(\"saved image = \" + JSON.stringify(image))\n        this.setState({savedImage : image})\n        this.onImgLoaded(image)\n          \n    }\n      \n    onImgLoaded = (img) => {\n            const storage = getStorage();\n    \n            // Create a reference to 'mountains.jpg'\n            const d = new Date();\n            let time = d.getTime();\n            const mountainsRef = ref(storage, time + '.jpg');\n    \n            // Create a reference to 'images/mountains.jpg'\n            const mountainImagesRef = ref(storage, 'images/' + time + '.jpg');\n    \n            // While the file names are the same, the references point to different files\n            mountainsRef.name === mountainImagesRef.name;           // true\n            mountainsRef.fullPath === mountainImagesRef.fullPath;   // false \n            uploadString(mountainsRef, img, 'data_url').then((snapshot) => {\n              getDownloadURL(ref(storage, time + '.jpg'))\n                .then(this.onSuccessLoaded)\n                .catch((error) => {\n                    console.log('error = ' + error);\n                });\n            });\n    }\n    onSuccessLoaded = (url) => {\n        console.log('Uploaded a blob or file! url = ' + url);\n        const iAm = this.props.user\n        var user = this.props.dbUser\n        const newSign = {type : 2, text : \"\", url : url, name : (iAm.first_name + \" \" + iAm.last_name), user_id : iAm.id}\n        if (user.album == undefined || user.album.length == 0){\n            user.album = [newSign]\n        } else {\n            if (user.album != undefined && user.album.length > 1){\n                user.album.reverse()\n            }\n            user.album.push(newSign)\n        }\n        console.log(\"saveSign user = \" + JSON.stringify(user))\n        saveUserInDb(this.props.db, user)\n        this.close()\n    }\n    thicknessChanged = (e) => {\n        this.setState({thickness : Number(e.target.value)})\n    }\n    colorChanged = (e) => {\n        this.setState({color : e.target.value})\n    }\n    toggleSave = () => {\n        this.setState({active : false})\n        \n    }\n    undo = () => {\n        this.paintableRef.current.undo()\n    }\n    redo = () => {\n        this.paintableRef.current.redo()\n    }\n    changeColor = () => {\n        this.changeColorClick.current.click();\n    }\n    close = () => {\n        if (document.getElementsByClassName('vkuiAppRoot').length > 0){\n            document.getElementsByClassName('vkuiAppRoot')[0].style[\"overflow\"] = 'auto'\n        }\n        this.props.onTypePicked(-1)\n    }\n\trender() {\n\t  return (\n\t\t<div className=\"text_sign_screen\">\n            <div style={{marginTop : '120px'}} className=\"nav_text_sign just_cont\">\n                <div onClick={this.close} className=\"back_cont\">\n                    <img src={left}/>\n                </div>\n                \n                <div className=\"flex\">\n                    <div style={{marginTop : '-6px'}} className=\"edit_icon_cont\">\n                        {/* <div style={{backgroundColor : this.state.color}} className=\"input_color_round\"/> */}\n                        <input \n                        className=\"input_color\"\n                        type=\"color\"\n                        value={this.state.color}\n                        onChange={this.colorChanged}/>\n                    </div>\n                    <div onClick={this.undo} className=\"edit_icon_cont\">\n                        <img className=\"edit_icon\" src={undo}/>\n                    </div>\n                    <div onClick={this.redo} className=\"edit_icon_cont\">\n                        <img className=\"edit_icon\" src={redo}/>\n                    </div>\n                    <div style={{marginRight : '12px'}} onClick={this.toggleSave} className=\"edit_icon_cont\">\n                        <img style={{height : '32px', width : '32px', margin : '12px 12px 0 12px'}}  src={check}/>\n                    </div>\n                    \n                   \n                    \n                    {/* <input type=\"range\"\n                        defaultValue={5}\n                        onChange={this.thicknessChanged}\n                        min={1}\n                        max={30}\n                        step={1}/> */}\n                </div>\n            </div>   \n            <div className=\"canvas_container\">\n                <Paintable\n                    width={window.screen.width - 16}\n                    height={window.screen.width}\n                    active={this.state.active}\n                    color={this.state.color}\n                    thickness={this.state.thickness}\n                    useEraser={this.state.useEraser}\n                    ref={this.paintableRef}\n                    image={localStorage.getItem('/') || undefined}\n                    onSave={this.save}\n                    onLongPress={() => console.log('long')}>\n                    <div className=\"canvas-inner\"></div>\n                </Paintable>\n            </div> \n            \n            {/* <div onClick={this.toggleSave} className=\"center_hor sign_text_btn\">Сохранить</div> */}\n            <Loader />\n        </div>\n\t  )\n\t}\n  }\n  export default CustomSign;\n\n\n","import React from 'react';\nimport logo from '../img/logo.png'\nimport add from '../img/add.png'\nimport empty from '../img/empty.png'\nimport settings from '../img/settings.svg'\nimport TypePicker from './TypePicker';\nimport TextSign from './TextSign';\nimport AlbumItem from './AlbumItem';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from \"firebase/storage\";\nimport { saveImageSign, saveUserInDb } from '../utils/Utils';\nimport Settings from './Settings';\nimport CustomSign from './CustomSign';\n\nvar img = new Image; \nvar fr = new FileReader;\nvar pickedFile = {}\n\nclass Main extends React.Component {\n   \n\tconstructor(props){\n\t\tsuper(props)\n        this.state = {\n            isShowTypePicker : false,\n            isShowSettings : false,\n            type : -1,\n            isLoading : false\n        }\n        //this.paintableRef = useRef<PaintableRef>(null);\n        this.fileUpload = React.createRef();\n        this.pickImage = this.pickImage.bind(this);\n        this.fileChangedHandler = this.fileChangedHandler.bind(this);\n\t}\n    componentDidMount(){\n\n    }\n    showTypePicker = () => {\n        this.setState({isShowTypePicker : true})\n    }\n    hidePicker = () => {\n        this.setState({isShowTypePicker : false})\n    }\n    onTypePicked = (type) => {\n        this.setState({type : type})\n        if (type == 1){\n            this.pickImage()\n        }\n    }\n    fileChangedHandler(event) {\n        if(event && event.target.files && event.target.files.length > 0){\n            console.log(\"uploadFile file 1 = \" + event.target.files[0])\n            this.uplFile(event.target.files[0])\n        }\n       \n    }\n    pickImage() {\n        this.fileUpload.current.click();\n    }\n    uplFile = (file) => {\n        console.log(\"uploadFile file = \" + file)\n        pickedFile = file\n        fr.onload = this.onLoadedFileReader\n        fr.readAsDataURL(file);\n    }\n    onImgLoaded = () => {\n        //img\n        const storage = getStorage();\n\n        // Create a reference to 'mountains.jpg'\n        const d = new Date();\n        let time = d.getTime();\n        const mountainsRef = ref(storage, time + '.jpg');\n\n        // Create a reference to 'images/mountains.jpg'\n        const mountainImagesRef = ref(storage, 'images/' + time + '.jpg');\n\n        // While the file names are the same, the references point to different files\n        mountainsRef.name === mountainImagesRef.name;           // true\n        mountainsRef.fullPath === mountainImagesRef.fullPath;   // false \n        this.setState({isLoading : true})\n        uploadBytes(mountainsRef, pickedFile).then((snapshot) => {\n            console.log('Uploaded a blob or file!');\n            this.setState({isLoading : false})\n            getDownloadURL(ref(storage, time + '.jpg'))\n            .then(this.onSuccessLoaded)\n            .catch((error) => {\n                console.log('error = ' + error);\n            });\n        });\n        \n    }\n    onSuccessLoaded = (url) => {\n        console.log('Uploaded a blob or file! url = ' + url);\n        this.saveSign(url)\n    } \n    onLoadedFileReader = () => {\n        img.onload = this.onImgLoaded\n        img.src = fr.result;\n    }\n    saveSign = (url) => {\n        const iAm = this.props.user\n        var user = this.props.dbUser\n        const newSign = {type : 1, text : \"\", url : url, name : (iAm.first_name + \" \" + iAm.last_name), user_id : iAm.id}\n        if (user.album == undefined || user.album.length == 0){\n            user.album = [newSign]\n        } else {\n            if (user.album != undefined && user.album.length > 1){\n                user.album.reverse()\n            }\n            user.album.push(newSign)\n        }\n        console.log(\"saveSign user = \" + JSON.stringify(user))\n        saveUserInDb(this.props.db, user)\n    }\n    toggleSettings = () => {\n        this.setState({isShowSettings : !this.state.isShowSettings})\n    }\n\trender() {\n        const user = this.props.dbUser\n        if (this.state.type == -1 || this.state.type == 1){\n            return (\n                <div className=\"main_container\">\n                   <img className=\"logo\" src={logo}/>\n                   <div className=\"relative\">\n                        {(this.props.dbUser != undefined && this.props.dbUser.user != undefined) && <p className=\"name_title\">{this.props.dbUser.user.first_name + \" \" + this.props.dbUser.user.last_name}</p>}\n                        {this.props.isMyAlbum && <div onClick={this.toggleSettings} className=\"settings_icon\">\n                            <img src={settings}/>\n                        </div>}\n                   </div>\n                   {(!this.props.isBlockedSign && !this.props.isMyAlbum) && <img onClick={this.showTypePicker} className=\"add_img\" src={add}/>}\n                   {!this.props.isBLockedWatch && <div className=\"album_container\">\n                        {(user.album != undefined && user.album.length > 0) && user.album.map((item, index) => (\n                            <AlbumItem isMyAlbum={this.props.isMyAlbum} item={item} index={index} key={index}/>\n                        ))}\n                        {(user.album == undefined || user.album.length == 0) && <img className=\"empty_img\" src={empty}/>}\n                   </div>}\n                   {this.props.isBLockedWatch && <img className=\"empty_img\" src={empty}/>}\n\n                   <input id=\"fileInput\" className=\"custom-file-input hover\" type=\"file\" accept=\"image/*\" onChange={this.fileChangedHandler} style={{ display: \"none\" }} ref={this.fileUpload}/>\n                    \n                   <Settings db={this.props.db} user={this.props.user} dbUser={this.props.dbUser} isShowSettings={this.state.isShowSettings} toggleSettings={this.toggleSettings}/>\n                   <TypePicker onTypePicked={this.onTypePicked} isShowTypePicker={this.state.isShowTypePicker} hidePicker={this.hidePicker}/>\n                </div>\n              )\n        } else if (this.state.type == 0){\n            return (<TextSign db={this.props.db} user={this.props.user} dbUser={this.props.dbUser} onTypePicked={this.onTypePicked}/>)\n        } else if (this.state.type == 2){\n            return (\n                <CustomSign onTypePicked={this.onTypePicked} db={this.props.db} user={this.props.user} dbUser={this.props.dbUser}/>\n              )\n        }\n\t  \n\t}\n  }\n  export default Main;\n","import React from 'react';\nimport logo from '../img/logo.png'\nimport bridge from '@vkontakte/vk-bridge';\nimport { getDatabase, set, ref, onValue } from \"firebase/database\";\n\nclass Add extends React.Component {\n   \n\tconstructor(props){\n        super(props)\n        \n\t}\n    componentDidMount(){\n\n    }\n   \n    add = () => {\n        var data = {\n            user : this.props.user,\n            album : []\n        }\n        bridge.send(\"VKWebAppAddToProfile\", {\"ttl\" : 0});\n        set(ref(this.props.db, 'albums/' + this.props.user.id), data);\n        this.props.openView('main')\n    }\n\trender() {\n\t  return (\n\t\t<div className=\"main_container\">\n            <img className=\"logo\" src={logo}/>\n            <p className=\"name_title descr_add\">Добавьте ссылку к себе на страницу, чтобы люди могли оставить вам автографы</p>\n            <div onClick={this.add} className=\"center_hor add_btn sign_text_btn\">Добавить</div>\n        </div>\n\t  )\n\t}\n  }\n  export default Add;\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport bridge from '@vkontakte/vk-bridge';\nimport { View, ScreenSpinner, AdaptivityProvider, AppRoot, Root, Panel } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './styles/styles.css'\nimport Main from './panels/Main';\n\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, set, ref, onValue } from \"firebase/database\";\nimport { getUrlParameter } from './utils/Utils';\nimport Add from './panels/Add';\nimport CustomSign from './panels/CustomSign';\n\nconst firebaseConfig = {\n\tapiKey: \"AIzaSyCI91wZXP2eaX-PDZ7vcUQITTDrKjksPBQ\",\n\tauthDomain: \"vk-mini-apps-3d40e.firebaseapp.com\",\n\tprojectId: \"vk-mini-apps-3d40e\",\n\tstorageBucket: \"vk-mini-apps-3d40e.appspot.com\",\n\tmessagingSenderId: \"313555575143\",\n\tappId: \"1:313555575143:web:64979e52b58521bf25cfc2\",\n\tdatabaseURL:'https://vk-mini-apps-3d40e-default-rtdb.europe-west1.firebasedatabase.app/',\n\tmeasurementId: \"G-8VWSLCYJHK\"\n  };\n\nclass App extends React.Component {\n   \n\tconstructor(){\n\t\tsuper()\n\t\tthis.state = {\n\t\t\tactiveView : 'main',\n\t\t\tdb : {},\n\t\t\tlog : \"\",\n\t\t\tisMyAlbum : false,\n\t\t\tuser : {},\n\t\t\tisNewUser : false,\n\t\t\tdbUser : {},\n\t\t\tisBlockedSign : false,\n\t\t\tisBLockedWatch : false\n\t\t}\n\t\t\n\t}\n\tcomponentDidMount(){\n\t\tconst app = initializeApp(firebaseConfig);\n\t\tthis.database = getDatabase(app);\n\t\tthis.setState({db : this.database})\n\t\tbridge.send(\"VKWebAppInit\");\n\t\tbridge.send(\"VKWebAppGetUserInfo\");\n\t\tbridge.subscribe(this.onBridgeResult);\n\t\tvar vk_profile_id = getUrlParameter(\"vk_profile_id\")\n\t\tconsole.log(\"vk_profile_id 1 = \" + vk_profile_id)\n\t\t\n\t\tthis.vk_profile_id = vk_profile_id\n\t\tconsole.log(\"vk_profile_id 2 = \" + this.vk_profile_id)\n\t}\n\tonBridgeResult = (e) => {\n        switch (e.detail.type) {\n            \n            case \"VKWebAppInitResult\":\n\t\t\t\t//this.setState({log : JSON.stringify(e)})\n\t\t\t\t//bridge.send(\"VKWebAppAddToProfile\", {\"ttl\" : 0});\n            break;\n            case \"VKWebAppAddToProfileResult\":\n\t\t\t\t//this.setState({log : JSON.stringify(e)})\n            break;\n            case \"VKWebAppShowStoryBoxFailed\":\n\t\t\t\tconsole.log(\"failed story - \" + JSON.stringify(e.detail.data))\n            break;\n            case \"VKWebAppGetUserInfoResult\":\n\t\t\t\t//this.setState({log : JSON.stringify(e.detail.data)})\n\t\t\t\tconsole.log(\"vk_profile_id 3 = \" + this.vk_profile_id)\n\t\t\t\tconsole.log(\"myid 3 = \" + e.detail.data.id)\n\t\t\t\t\n\n\t\t\t\tif (this.vk_profile_id == undefined || this.vk_profile_id == \"\" || this.vk_profile_id == \"undefined\"){\n\t\t\t\t\tthis.vk_profile_id = e.detail.data.id\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.vk_profile_id == e.detail.data.id){\n\t\t\t\t\tthis.setState({isMyAlbum : true})\n\t\t\t\t}\n\t\t\t\tthis.setState({user : e.detail.data})\n\t\t\t\tthis.checkUserInDb(e.detail.data)\n\t\t\t\tthis.myId = e.detail.data.id\n\t\t\tbreak;\n\t\t\t\n            default: \n            break;\n        }\n\t}\n\tgetDbUser = (user) => {\n\t\tconst checkIsUserIngame = ref(this.state.db, 'albums/' + this.vk_profile_id);\n\t\tonValue(checkIsUserIngame, this.onFound);\n\t}\n\tcheckUserInDb = (user) => {\n\t\tconst checkIsUserIngame = ref(this.state.db, 'albums/' + user.id);\n\t\tonValue(checkIsUserIngame, this.onUserFoundInDB);\n\t}\n\tonUserFoundInDB = (snapshot) => {\n\t\tvar data = snapshot.val();\n\t\tconsole.log(\"vk_profile_id = \" + this.vk_profile_id)\n\t\tconsole.log(\"vk_profile_id 2 = \" + getUrlParameter(\"vk_profile_id\"))\n        console.log(\"onUserFoundInDB = \" + JSON.stringify(data))\n        if ((data == null || data == undefined) && (getUrlParameter(\"vk_profile_id\") == null || getUrlParameter(\"vk_profile_id\") == undefined)){\n\t\t\tthis.setState({isNewUser : true, activeView : 'add'})\n\t\t\tconsole.log(\"isNewUser = true\")\n            return\n\t\t}\n\t\tthis.getDbUser()\n\t\t\n\t\t\n\t}\n\tonFound = (snapshot) => {\n\t\tvar data = snapshot.val();\n\t\tif (data != null && data != undefined && data.user != undefined){\n\t\t\tconsole.log(\"onFound\")\n\t\t\tif (this.myId != data.user.id){\n\t\t\t\tif (data.can_sign_list != undefined && data.can_sign_list.length > 0){\n\t\t\t\t\tthis.setState({isBlockedSign : !data.can_sign_list.includes(this.myId)})\n\t\t\t\t}\n\t\n\t\t\t\tif (data.can_watch_list != undefined && data.can_watch_list.length > 0){\n\t\t\t\t\tthis.setState({isBLockedWatch : !data.can_watch_list.includes(this.myId)})\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (data.album != undefined && data.album.length > 1){\n\t\t\t\tdata.album.reverse()\n\t\t\t}\n\t\t\tthis.setState({dbUser : data})\n\t\t} else {\n\t\t\tconsole.log(\"onFound not id = \" + this.vk_profile_id)\n\t\t}\n\t}\n\topenView = (view) => {\n\t\tif (view == 'main'){\n\t\t\tbridge.send(\"VKWebAppGetUserInfo\");\n\t\t}\n\t\tthis.setState({activeView : view})\n\t}\n\trender() {\n\t  return (\n\t\t<AdaptivityProvider>\n\t\t\t<AppRoot>\n\t\t\t\t\n\t\t\t\t\t<Root activeView={this.state.activeView}>\n\t\t\t\t\t\t<View id=\"main\" activePanel=\"main_panel\">\n\t\t\t\t\t\t\t<Panel id=\"main_panel\">\n\t\t\t\t\t\t\t\t{/* <CustomSign/> */}\n\t\t\t\t\t\t\t\t<Main isBLockedWatch={this.state.isBLockedWatch} isBlockedSign={this.state.isBlockedSign} user={this.state.user} dbUser={this.state.dbUser} isMyAlbum={this.state.isMyAlbum} log={this.state.log} db={this.state.db} openView={this.openView}/>\n\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<View id=\"add\" activePanel=\"add_panel\">\n\t\t\t\t\t\t\t<Panel id=\"add_panel\">\n\t\t\t\t\t\t\t\t<Add isNewUser={this.state.isNewUser} isMyAlbum={this.state.isMyAlbum} user={this.state.user} db={this.state.db} openView={this.openView}/>\n\t\t\t\t\t\t\t</Panel>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</Root>\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t</AppRoot>\n\t\t\t\n\t\t</AdaptivityProvider>\n\t  )\n\t}\n  }\n  export default App;\n  \n  ReactDOM.render(\n\t<App/>\n  ,\n  document.getElementById('root')\n  );","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}